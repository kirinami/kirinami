diff --git a/dist/server/render.js b/dist/server/render.js
index 0fc9bea5ac42362ef83d8ef8dc3e91855eeb2f36..15b763d875d9f2283c92f716902f1d8e1f8f51bc 100644
--- a/dist/server/render.js
+++ b/dist/server/render.js
@@ -668,7 +668,13 @@ async function renderToHTML(req, res, pathname, query, renderOpts) {
                 }
                 const { App: EnhancedApp , Component: EnhancedComponent  } = enhanceComponents(options, App, Component);
                 if (renderShell) {
-                    return renderShell(EnhancedApp, EnhancedComponent).then(async (stream)=>{
+                    return renderShell(EnhancedApp, EnhancedComponent, options.enhanceRender).then(async (stream)=>{
+                        if (stream._result) {
+                            return {
+                                html: stream._result,
+                                head
+                            }
+                        }
                         const forwardStream = (0, _nodeWebStreamsHelper).readableStreamTee(stream)[1];
                         const html = await (0, _nodeWebStreamsHelper).streamToString(forwardStream);
                         return {
@@ -750,8 +756,14 @@ async function renderToHTML(req, res, pathname, query, renderOpts) {
             }
         } else {
             // Enabling react concurrent rendering mode: __NEXT_REACT_ROOT = true
-            const renderShell = async (EnhancedApp, EnhancedComponent)=>{
+            const renderShell = async (EnhancedApp, EnhancedComponent, enhancedRender)=>{
                 const content = renderContent(EnhancedApp, EnhancedComponent);
+                if (enhancedRender) {
+                    const { stream, html, pageProps } = await enhancedRender(content, ReactDOMServer);
+                    stream._result = html;
+                    Object.assign(props1.pageProps, pageProps);
+                    return stream;
+                }
                 return await (0, _nodeWebStreamsHelper).renderToInitialStream({
                     ReactDOMServer,
                     element: content
diff --git a/dist/shared/lib/utils.d.ts b/dist/shared/lib/utils.d.ts
index 3dc730b8e29466185a50c79884a02cd0dad93c89..eb8ef515fa16f91ba3afdad737a61e2b69698844 100644
--- a/dist/shared/lib/utils.d.ts
+++ b/dist/shared/lib/utils.d.ts
@@ -9,6 +9,8 @@ import type { NextRouter } from './router/router';
 import type { ParsedUrlQuery } from 'querystring';
 import type { PreviewData } from 'next/types';
 import { COMPILER_NAMES } from './constants';
+import type * as React from 'react';
+import type * as ReactDOMServer from 'react-dom/server';
 export declare type NextComponentType<C extends BaseContext = NextPageContext, IP = {}, P = {}> = ComponentType<P> & {
     /**
      * Used for initial page load data population. Data returned from `getInitialProps` is serialized when server rendered.
@@ -41,6 +43,13 @@ export declare type Enhancer<C> = (Component: C) => C;
 export declare type ComponentsEnhancer = {
     enhanceApp?: Enhancer<AppType>;
     enhanceComponent?: Enhancer<NextComponentType>;
+    enhanceRender?: (Tree: React.ReactNode, reactDOMServer: typeof ReactDOMServer) => Promise<{
+        stream: ReactDOMServer.ReactDOMServerReadableStream;
+        html: string;
+        pageProps: {
+            [key: string]: any;
+        };
+    }>;
 } | Enhancer<NextComponentType>;
 export declare type RenderPageResult = {
     html: string;
